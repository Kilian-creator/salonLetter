<!DOCTYPE html>
<html>
<head>
  <title>Newsletter</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>

<h1>Lesen gegen Rechts</h1>

<form id="subscribeForm">
  <input type="email" id="email" required placeholder="Deine E-Mail">
  <input type="text" id="name" required placeholder="Dein Name">
  <input type="text" id="book" required placeholder="Dein Lieblingsbuch">
  <button type="submit" class="subscribe-btn">
  <svg width="220" height="220" viewBox="0 0 200 200">
    
    <!-- Text -->
    <text x="100" y="115"
          text-anchor="middle"
          font-size="20"
          font-weight="bold"
          fill="red">
      Subscribe
    </text>

  </svg>
</button>

  <p style="font-size:12px; margin-top:5px;">
    <a href="#" id="openPolicy">Datenschutzrichtlinie lesen</a>
  </p>
</form>

<div id="policyPopup" class="overlay">
  <div class="popup">
    <span id="closePolicy" class="close">&times;</span>
    
    <h2>Datenschutzerklärung für dein Newsletter-Formular</h2>
    <p><strong>Gültig ab:</strong> [Datum einsetzen]</p>
    <p>Wir freuen uns über dein Interesse an unserem Newsletter! Der Schutz deiner persönlichen Daten ist uns sehr wichtig.</p>
    
    <h3>1. Erhobene Daten</h3>
    <ul>
      <li>Dein Name</li>
      <li>Deine E-Mail-Adresse</li>
      <li>Dein Lieblingsbuch</li>
    </ul>
    
    <h3>2. Zweck der Datenverarbeitung</h3>
    <ul>
      <li>dich in unseren Newsletter aufzunehmen</li>
      <li>dir Neuigkeiten, Angebote oder Informationen rund um unsere Inhalte zu senden</li>
    </ul>
    <p>Eine Weitergabe deiner Daten an Dritte erfolgt nicht, außer wir sind gesetzlich dazu verpflichtet.</p>
    
    <h3>3. Einwilligung</h3>
    <p>Mit dem Klick auf den „Submit“-Button erklärst du dich ausdrücklich damit einverstanden, dass wir deine Daten gemäß dieser Datenschutzrichtlinie verarbeiten.</p>
    
    <h3>4. Speicherung und Sicherheit</h3>
    <p>Wir speichern deine Daten auf sicheren Servern und setzen angemessene technische und organisatorische Maßnahmen ein.</p>
    
    <h3>5. Deine Rechte</h3>
    <p>Du hast jederzeit das Recht:</p>
    <ul>
      <li>Auskunft über deine gespeicherten Daten zu erhalten</li>
      <li>die Berichtigung unrichtiger Daten zu verlangen</li>
      <li>die Löschung deiner Daten zu beantragen</li>
      <li>deine Einwilligung zur Datenverarbeitung zu widerrufen</li>
    </ul>
    <p>Wenn du eines dieser Rechte wahrnehmen möchtest, kontaktiere uns bitte unter: [E-Mail-Adresse einsetzen].</p>
    
    <h3>6. Änderungen</h3>
    <p>Wir behalten uns vor, diese Richtlinie bei Bedarf anzupassen. Die jeweils aktuelle Version wird auf unserer Website veröffentlicht.</p>
  </div>
</div>

<footer>
        <img src="MGPK_Logo_Screen_rgb_rot.png" alt="Firmenlogo" class="gapa-logo">
        <img src="Symbol_R_durchsichtig.png" alt="Firmenlogo" class="impuls-logo">
</footer>


<script type="module">
  import { createClient } from "https://esm.sh/@supabase/supabase-js@2";

  const supabase = createClient(
    "https://nwpwxlurmlibabkrlifo.supabase.co",
    "sb_publishable_a1KD_pFoxCMEsiWMWitnUQ_xQks4ShC"
  );

  document.getElementById("subscribeForm").addEventListener("submit", async (e) => {
    e.preventDefault();

    const email = document.getElementById("email").value;
    const name = document.getElementById("name").value;
    const book = document.getElementById("book").value;

    const { data, error } = await supabase
      .from("subscribers")
      .insert([{ email, name, book }]);

    console.log(data, error);

    if (error) {
      alert(error.message);
    } else {
      alert("Vielen Dank für die Anmeldung!");
    }
  });

  const policyPopup = document.getElementById('policyPopup');
const openPolicy = document.getElementById('openPolicy');
const closePolicy = document.getElementById('closePolicy');

openPolicy.addEventListener('click', (e) => {
  e.preventDefault();
  policyPopup.style.display = 'flex';
});

closePolicy.addEventListener('click', () => {
  policyPopup.style.display = 'none';
});

// Klick außerhalb des Popups schließt es
policyPopup.addEventListener('click', (e) => {
  if (e.target === policyPopup) policyPopup.style.display = 'none';
});


</script>

</body>
</html>
